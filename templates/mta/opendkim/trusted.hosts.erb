# templates/mta/opendkim/trusted.hosts.erb
# managed by puppet/pocketprotector
#
# hosts trusted by opendkim
# i.e. localhost (ipv4/ipv6) by default
# and others if defined

127.0.0.1
::1
<% scope().call_function('hiera',['pocketprotector::mta::opendkim::domains']).each do |opendkimdomain, hash| -%>
<% if scope().call_function('hiera',['pocketprotector::mta::opendkim::domains' + @opendkimdomain + '.trustedhost']) -%>
<% scope().call_function('hiera',['pocketprotector::mta::opendkim::domains' + @opendkimdomain + '.trustedhost']).each do |trustedhost| -%>
<%= @trustedhost %>
<% end %>
<% end %>
<% end %>
